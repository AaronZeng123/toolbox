<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片工具 - 实用工具集合</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/image-editor.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css">
</head>
<body>
    <header>
        <h1>图片工具</h1>
    </header>
    
    <main>
        <div class="tool-container">
            <!-- 文件上传区域 -->
            <div class="upload-section">
                <div class="input-header">
                    <label for="imageInput">图片文件:</label>
                    <button id="clearInputBtn" class="clear-btn">清除</button>
                </div>
                <input type="file" id="imageInput" accept="image/*" multiple hidden>
                <div class="upload-area" id="dropZone">
                    <!-- 未上传状态 -->
                    <div class="upload-content" id="uploadContent">
                        <div class="upload-icon">🖼️</div>
                        <p>拖拽图片文件到这里或点击上传</p>
                        <button class="upload-btn">选择文件</button>
                    </div>
                    <!-- 预览状态 -->
                    <div class="preview-content" id="previewContent" style="display: none;">
                        <div class="file-info">
                            <div class="file-icon">🖼️</div>
                            <div class="file-details">
                                <div class="file-name" id="fileName">文件名称</div>
                                <div class="file-meta" id="fileMeta">尺寸：0x0 | 大小：0MB</div>
                            </div>
                        </div>
                        <img id="imagePreview" class="image-preview" alt="图片预览">
                    </div>
                </div>
            </div>

            <!-- 功能按钮区域 -->
            <div class="actions-section">
                <button id="compressBtn" class="action-btn">压缩图片</button>
                <button id="resizeBtn" class="action-btn">调整尺寸</button>
                <button id="cropBtn" class="action-btn">裁剪图片</button>
                <button id="scanPdfBtn" class="action-btn">扫描为PDF</button>
            </div>

            <!-- 功能区域 -->
            <div class="function-sections">
                <!-- 压缩功能区 -->
                <div id="compressSection" class="function-section">
                    <div class="input-group">
                        <label>压缩质量：</label>
                        <input type="range" id="qualitySlider" min="0" max="100" value="80">
                        <span id="qualityValue">80%</span>
                    </div>
                    <div class="input-group">
                        <button id="startCompressBtn" class="action-btn" disabled>开始压缩</button>
                    </div>
                    <div class="hint">提示：数值越小压缩率越高，图片质量损失越大</div>
                </div>

                <!-- 调整尺寸功能区 -->
                <div id="resizeSection" class="function-section">
                    <div class="input-group">
                        <label>宽度：</label>
                        <input type="number" id="widthInput" placeholder="输入宽度">
                        <label>高度：</label>
                        <input type="number" id="heightInput" placeholder="输入高度">
                        <label>
                            <input type="checkbox" id="keepRatio" checked>
                            保持比例
                        </label>
                    </div>
                    <div class="input-group">
                        <button id="startResizeBtn" class="action-btn" disabled>开始调整</button>
                    </div>
                    <div class="hint">提示：留空一项将根据原始比例自动计算</div>
                </div>

                <!-- 裁剪功能区 -->
                <div id="cropSection" class="function-section">
                    <div class="input-group">
                        <label>裁剪尺寸：</label>
                        <input type="number" id="cropWidth" placeholder="宽度">
                        <span>x</span>
                        <input type="number" id="cropHeight" placeholder="高度">
                        <label>
                            <input type="checkbox" id="keepCropRatio" checked>
                            保持比例
                        </label>
                    </div>
                    <div class="input-group fixed-ratio-options">
                        <label>固定比例：</label>
                        <button id="ratio34Btn" class="ratio-btn">3:4</button>
                        <button id="ratio43Btn" class="ratio-btn">4:3</button>
                        <button id="ratioFreeBtn" class="ratio-btn active">自由</button>
                    </div>
                    <div class="crop-container">
                        <div class="crop-preview" id="cropPreview"></div>
                        <div class="crop-size-display" id="cropSizeDisplay">0 × 0</div>
                        <div class="crop-controls">
                            <button id="rotateLeftBtn" class="action-btn">↺ 向左旋转</button>
                            <button id="rotateRightBtn" class="action-btn">↻ 向右旋转</button>
                            <button id="resetCropBtn" class="action-btn">重置</button>
                            <button id="startCropBtn" class="action-btn">确认裁剪</button>
                        </div>
                    </div>
                </div>

                <!-- 扫描为PDF功能区 -->
                <div id="scanSection" class="function-section">
                    <div class="input-group">
                        <label>PDF 页面大小：</label>
                        <select id="pageSize">
                            <option value="A4">A4</option>
                            <option value="A5">A5</option>
                            <option value="letter">Letter</option>
                            <option value="auto">自动(根据图片)</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>页面方向：</label>
                        <select id="pageOrientation">
                            <option value="portrait">纵向</option>
                            <option value="landscape">横向</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <button id="startScanBtn" class="action-btn" disabled>生成PDF</button>
                    </div>
                </div>
            </div>

            <!-- 添加多图片预览区域 -->
            <div class="images-preview" id="imagesPreview" style="display: none;">
                <div class="images-grid" id="imagesGrid"></div>
            </div>
        </div>
    </main>

    <div id="toast" class="toast"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="../js/modules/image-editor.js"></script>
</body>
</html>